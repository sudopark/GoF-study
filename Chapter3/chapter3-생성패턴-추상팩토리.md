

## Chapter3 생성 패턴

- 생성 패턴은 시스템이 어떤 구체 클래스를 사용하는지에 대한 정보를 캡슐화함
- 생성 패턴은 이들 클래스드르이 인스턴스들이 어떻게 만들고 어떻게 서로 맞붙는지에 해한 부분을 가려줌

-> 무엇이 생성되고 누가 이것을 생성하며, 어떻게 생성되는지, 언제 생성할것인지 결정하는데 유연성을 확보할 수 있음



### 추상 팩토리(Abstract Factory) 

#### 의도

상세화된 서브클래스를 정의하지 않고도 서로 관련성이 있거나 독립적인 여러 객체의 군을 생성하기 위한 인터페이스를 제공

#### 다른이름

키트(kit)

#### 동기

예) 사용자 인터페이스 툴킷을 예를들어 서로 다른 룩앤핏 표준을 가지고 있을때(다른 인터페이스와 표현 방식) 이 룩앤핏에 상관없이 응용프로그램이 이식성을 지니게 하고자 할때. 이를 위해 필요한 추상 팩토리 및 구현체를 만들고 팩토리 인터페이스만들 통해 추상화된 인스턴스를 생성

#### 활용성

- 객체가 생성되거나, 구성 표현되는 방식과 상관없이 시스템을 독립적으로 만들고자할때
- 여러 제품군 중 하나를 선택해서 시스템을 설정해야하고 한번 구성한 제품을 다른 것으로 대체할 수 있을때
- 관련된 제품 객체들이 함께 사용되도록 설계되어있고, 이 부분에 대한 제약을 외부에도 지켜지게 하고자 할때
- 제품에 대한 클래스 라이브러리를 제공하고 그들의 구현이 아닌 인터페이스를 노출하고 싶을때

#### 참여자

- AbstractFactory: 개념적 제품에 개한 객체를 생성하는 연산으로 인터페이스를 정의
- ConcreteFactory: 구체적인 제품에 대한 깨체를 생성하는 연산을 구현
- AbstractProduct: 개념적 제품 객체에 대한 인터페이스를 정의
- ConcreteProduct: 구체적으로 팩토리가 생성할 객체를 정의, AbstractProduct의 인터페이스를 구현
- Client: AbstractFactory, AbstractProduct에 선언된 인터페이스를 이용

#### 협력 방법

- 일반적으로 구체 팩토리의 클래스의 인스턴스 한개가 런타임에 만들어짐 -> 이 팩토리가 특정 구현을 갖는 제품 객체를 생성, 서로 다른 객체를 사용하려면 다른 팩토리를 만들어야함
- 추상 팩토리는 필요한 객체를 만드는 책임을 서브클래스에 위임

#### 결과

1. 구체적인 클래스가 분리됨
2. 제품군을 쉽게 대체할 수 있음
3. 제품 사이의 일관성을 증진시킴
4. 새로운 종류의 제품을 제공하기 어려움 => 상속받는 서브클래스들도 수정되어야함

#### 구현

- 추상 팩토리 패턴을 구현하는 방법

1. 팩토리를 단일체로 정의 -> 1개만 만들면 됨으로
2. 제품을 생성: 추상 팩토리는 제품 생성을 위한 인터페이스만을 제공하고 실제로 생성하는 책임은 구체 product에 있음. 이를 위한 가장 공통적인 방법은 각 제품을 위해 팩토리 메서드를 정의
3. 확장 가능한 팩토리를 정의: AbstractFactory에 생성할 각 제품의 종류 별 서로 다른 연산을 정의 or 생성할 객체를 매개변수로 만들어 연산에 넘기기.

#### 잘 알려진 사용 예

Kit 류의 WidgetKit, dialogKit ...

#### 관련 패턴

추상 팩토리 클래스는 팩토리 매서드 패턴을 이용해서 구현되는데, 원형 태턴을 이용할때도 있음, 구체 팩토리는 단일체 패턴을 이용하여 구현하는 경우가 많음